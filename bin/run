#!/usr/bin/env sh

if which greadlink > /dev/null 2>&1; then
    alias readlink=greadlink
fi

projectDir="$(dirname "$(dirname "$(readlink -f "$0")")../")"

# we need some configuration
if [ -e .env ]; then
    . "$projectDir/.env"
elif [ -e .env-sample ]; then
    . "$projectDir/.env-sample"
else
    echo "no config found"
    exit 1
fi

. $projectDir/share/init

projectName=$(echo $BASEHOST | sed 's/[^a-zA-Z]//g')

docker-compose -f "$projectDir/$COMPOSE_FILE" -p "$projectName" "$@"
